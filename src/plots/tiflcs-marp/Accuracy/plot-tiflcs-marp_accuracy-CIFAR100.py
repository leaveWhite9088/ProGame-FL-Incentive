import matplotlib.pyplot as plt
import numpy as np
import matplotlib

# 设置全局字体为 Times New Roman
matplotlib.rcParams['font.family'] = 'Times New Roman'
matplotlib.rcParams['font.size'] = 16  # 同时设置字体大小

# 定义轮次
users = range(100)

accuracy_baseline = [0.0165, 0.0186, 0.0226, 0.0237, 0.0213, 0.02, 0.0201, 0.0214, 0.0241, 0.029, 0.0305, 0.0346,
                     0.0391,
                     0.0417, 0.0408, 0.0427, 0.0425, 0.0411, 0.0438, 0.0471, 0.0495, 0.0491, 0.0522, 0.0515, 0.0571,
                     0.059, 0.0613, 0.0624, 0.0604, 0.0636, 0.0655, 0.067, 0.0686, 0.0711, 0.0747, 0.078, 0.0776,
                     0.0796,
                     0.0823, 0.0816, 0.0852, 0.0923, 0.0851, 0.092, 0.0905, 0.0954, 0.0996, 0.1001, 0.0972, 0.1006,
                     0.1001, 0.1008, 0.103, 0.1044, 0.1068, 0.1084, 0.1077, 0.1085, 0.1079, 0.1104, 0.1118, 0.1145,
                     0.1132, 0.1162, 0.1174, 0.1197, 0.12, 0.1169, 0.119, 0.1169, 0.1159, 0.1192, 0.1185, 0.1213,
                     0.1203,
                     0.1227, 0.1225, 0.1205, 0.1256, 0.1274, 0.122, 0.1235, 0.1223, 0.128, 0.1296, 0.1269, 0.1317,
                     0.1284, 0.1311, 0.1285, 0.132, 0.1349, 0.1355, 0.1326, 0.1348, 0.1351, 0.1368, 0.1361, 0.1365,
                     0.1363]
accuracy_pgirdfl = [0.0187, 0.0191, 0.0185, 0.0145, 0.0151, 0.0147, 0.0172, 0.0258, 0.0527, 0.053, 0.0531, 0.055,
                    0.0608, 0.0703, 0.0724, 0.0823, 0.0852, 0.0811, 0.0819, 0.0942, 0.0938, 0.0964, 0.0998, 0.0977,
                    0.0986, 0.1057, 0.1074, 0.1106, 0.1137, 0.1116, 0.1155, 0.115, 0.1215, 0.1211, 0.1248, 0.127,
                    0.1313, 0.1305, 0.1332, 0.1295, 0.1336, 0.1349, 0.1341, 0.136, 0.1394, 0.138, 0.1419, 0.1401,
                    0.1442, 0.1446, 0.1398, 0.1464, 0.1463, 0.1424, 0.1513, 0.1492, 0.1497, 0.1514, 0.1534, 0.1567,
                    0.1542, 0.1537, 0.1552, 0.1574, 0.1571, 0.1649, 0.1651, 0.1677, 0.16, 0.1651, 0.1623, 0.1667,
                    0.1677, 0.1674, 0.1674, 0.1691, 0.1686, 0.1692, 0.1687, 0.1704, 0.1755, 0.1735, 0.1684, 0.1713,
                    0.1784, 0.1784, 0.1807, 0.1783, 0.1838, 0.1823, 0.1808, 0.1824, 0.1879, 0.1835, 0.188, 0.1892,
                    0.187, 0.1884, 0.1881, 0.1942]

accuracy_fixed = [0.0172, 0.0185, 0.0189, 0.0196, 0.018, 0.0168, 0.0152, 0.0122, 0.0135, 0.0128, 0.013, 0.0143, 0.0144,
                  0.015, 0.0159, 0.0156, 0.0177, 0.0187, 0.0198, 0.0208, 0.023, 0.0228, 0.0238, 0.0259, 0.0282, 0.0329,
                  0.0317, 0.034, 0.0356, 0.0367, 0.0389, 0.0431, 0.0447, 0.047, 0.0499, 0.0492, 0.0472, 0.0458, 0.0486,
                  0.0498, 0.0497, 0.0514, 0.0532, 0.0531, 0.0571, 0.0595, 0.0585, 0.0576, 0.0593, 0.0604, 0.0591,
                  0.0597, 0.0614, 0.0658, 0.0648, 0.0675, 0.0695, 0.0665, 0.0712, 0.0741, 0.0741, 0.0751, 0.0771,
                  0.0773, 0.0744, 0.08, 0.0806, 0.0794, 0.0867, 0.0827, 0.086, 0.0885, 0.0865, 0.09, 0.0893, 0.0901,
                  0.0916, 0.0934, 0.0853, 0.0947, 0.0948, 0.093, 0.0972, 0.097, 0.1001, 0.0987, 0.0983, 0.0995, 0.1002,
                  0.1044, 0.1022, 0.1024, 0.1025, 0.1036, 0.1022, 0.1093, 0.1054, 0.1099, 0.1121, 0.1114]

accuracy_random = [0.0169, 0.0186, 0.0188, 0.0158, 0.0142, 0.0142, 0.0151, 0.0146, 0.0171, 0.0196, 0.0205, 0.0212,
                   0.0215, 0.025, 0.0311, 0.0367, 0.0394, 0.04, 0.0436, 0.0474, 0.0492, 0.0509, 0.0531, 0.0524, 0.0586,
                   0.0595, 0.0587, 0.0616, 0.0664, 0.0695, 0.0739, 0.0758, 0.0803, 0.0819, 0.0819, 0.0893, 0.0909,
                   0.0914, 0.0949, 0.0938, 0.0971, 0.0988, 0.0999, 0.1047, 0.1033, 0.1031, 0.1079, 0.1048, 0.1083,
                   0.1114, 0.1089, 0.1127, 0.1163, 0.1158, 0.1152, 0.1163, 0.119, 0.1164, 0.1194, 0.1202, 0.122, 0.1245,
                   0.1233, 0.1252, 0.1244, 0.1266, 0.1247, 0.1281, 0.128, 0.131, 0.1294, 0.1305, 0.1316, 0.1327, 0.1324,
                   0.1328, 0.1355, 0.1361, 0.1398, 0.1372, 0.139, 0.1406, 0.1402, 0.1386, 0.138, 0.1405, 0.1385, 0.1421,
                   0.1452, 0.144, 0.1448, 0.1458, 0.1473, 0.1448, 0.1475, 0.1435, 0.1494, 0.1473, 0.1515, 0.1515]
# accuracy_FL_Client_Sampling =

accuracy_pgirdfl2 = [0.0294, 0.0833, 0.1069, 0.1188, 0.1333, 0.1466, 0.1561, 0.1634, 0.1724, 0.179, 0.1885, 0.1913,
                     0.2003, 0.2032, 0.208, 0.2138, 0.2169, 0.2213, 0.227, 0.227, 0.227, 0.227, 0.227, 0.2277, 0.2277,
                     0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334,
                     0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334,
                     0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2335, 0.2335, 0.2335, 0.2338, 0.2339, 0.2347, 0.2353,
                     0.2364, 0.2389, 0.2389, 0.2389, 0.2393, 0.2393, 0.2393, 0.2393, 0.2393, 0.2393, 0.2393, 0.2393,
                     0.2393, 0.2393, 0.2393, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24,
                     0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24]

accuracy_tiflcsmarp = [0.0187, 0.0133, 0.0156, 0.0186, 0.025, 0.0283, 0.0322, 0.0366, 0.0432, 0.0455, 0.0516, 0.0542,
                       0.058, 0.0598, 0.0658, 0.0668, 0.0705, 0.0761, 0.0784, 0.0779, 0.0815, 0.0839, 0.0874, 0.0878,
                       0.0919, 0.0911, 0.0943, 0.0942, 0.0976, 0.0958, 0.0978, 0.1005, 0.1002, 0.1028, 0.1026, 0.1048,
                       0.1052, 0.1062, 0.1071, 0.108, 0.1097, 0.1104, 0.1079, 0.1085, 0.1109, 0.1113, 0.115, 0.1136,
                       0.1134, 0.1162, 0.116, 0.1174, 0.1183, 0.1181, 0.1188, 0.1205, 0.12, 0.1206, 0.1214, 0.1233,
                       0.1218, 0.1222, 0.1222, 0.1218, 0.1247, 0.1248, 0.1238, 0.1261, 0.1252, 0.1235, 0.1243, 0.1255,
                       0.1258, 0.1259, 0.1294, 0.1279, 0.1279, 0.1286, 0.1293, 0.1293, 0.1304, 0.1322, 0.1315, 0.1318,
                       0.1308, 0.1318, 0.1325, 0.1335, 0.1322, 0.1328, 0.134, 0.1352, 0.134, 0.1372, 0.1353, 0.1348,
                       0.1349, 0.136, 0.1334, 0.1356]

accuracy_tiflcsmarp2 = [0.0102, 0.0476, 0.0719, 0.1046, 0.1194, 0.1291, 0.1398, 0.1466, 0.1536, 0.158, 0.1641, 0.1684,
                        0.1722, 0.1768, 0.1807, 0.1875, 0.1923, 0.1988, 0.2017, 0.2051, 0.2099, 0.2142, 0.218, 0.2217,
                        0.2273, 0.2264, 0.2336, 0.2348, 0.2391, 0.2369, 0.2398, 0.2454, 0.2439, 0.2491, 0.2514, 0.2536,
                        0.2565, 0.2556, 0.2543, 0.2563, 0.2607, 0.2598, 0.2659, 0.2631, 0.2628, 0.2697, 0.2684, 0.274,
                        0.2737, 0.2707, 0.2705, 0.2721, 0.2754, 0.2746, 0.274, 0.275, 0.2764, 0.279, 0.2774, 0.2775,
                        0.2784, 0.2756, 0.2813, 0.2755, 0.2801, 0.2772, 0.2792, 0.2776, 0.2779, 0.2792, 0.2783, 0.2765,
                        0.2794, 0.2769, 0.2814, 0.2763, 0.2821, 0.2788, 0.2796, 0.28, 0.2826, 0.2774, 0.2807, 0.2807,
                        0.2782, 0.2795, 0.2781, 0.2791, 0.2765, 0.2766, 0.2761, 0.2778, 0.2771, 0.275, 0.2781, 0.2735,
                        0.2747, 0.2731, 0.2762, 0.2763]

# 绘制数据线
plt.plot(users, accuracy_baseline, 'r--o', markersize=5, linewidth=2, label='Baseline')
plt.plot(users, accuracy_pgirdfl, 'b--s', markersize=5, linewidth=2, label='PGI-RDFL')
plt.plot(users, accuracy_fixed, 'y--D', markersize=5, linewidth=2, label='Fixed')
plt.plot(users, accuracy_random, 'g--^', markersize=5, linewidth=2, label='Random')
# plt.plot(users, accuracy_FL_Client_Sampling, 'm--*', markersize=5, linewidth=2, label='Client-Sampling')
plt.plot(users, accuracy_tiflcsmarp, 'c--*', markersize=5, linewidth=2, label='TiFLCS-MARP')

plt.plot(users, accuracy_pgirdfl2, 'g', markersize=5, linewidth=2, label='PGI-RDFL(without force update)')
plt.plot(users, accuracy_tiflcsmarp2, 'c--', markersize=5, linewidth=2, label='TiFLCS-MARP(evently)')

# 添加图例
plt.legend()

plt.tick_params(axis='x', labelsize=14)
plt.tick_params(axis='y', labelsize=14)

# 设置标题和坐标轴标签
plt.xlabel(r'$Round$')
plt.ylabel(r'$Accuracy$')

# 强制显示完全
plt.tight_layout()

# 显示网格
plt.grid(True)

# 显示图表
plt.show()
