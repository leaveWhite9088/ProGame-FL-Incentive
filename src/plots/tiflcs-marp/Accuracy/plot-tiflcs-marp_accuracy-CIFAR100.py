import matplotlib.pyplot as plt
import numpy as np
import matplotlib

# 设置全局字体为 Times New Roman
matplotlib.rcParams['font.family'] = 'Times New Roman'
matplotlib.rcParams['font.size'] = 16  # 同时设置字体大小

# 定义轮次
users = range(100)

accuracy_baseline = [0.0165, 0.0186, 0.0226, 0.0237, 0.0213, 0.02, 0.0201, 0.0214, 0.0241, 0.029, 0.0305, 0.0346,
                     0.0391,
                     0.0417, 0.0408, 0.0427, 0.0425, 0.0411, 0.0438, 0.0471, 0.0495, 0.0491, 0.0522, 0.0515, 0.0571,
                     0.059, 0.0613, 0.0624, 0.0604, 0.0636, 0.0655, 0.067, 0.0686, 0.0711, 0.0747, 0.078, 0.0776,
                     0.0796,
                     0.0823, 0.0816, 0.0852, 0.0923, 0.0851, 0.092, 0.0905, 0.0954, 0.0996, 0.1001, 0.0972, 0.1006,
                     0.1001, 0.1008, 0.103, 0.1044, 0.1068, 0.1084, 0.1077, 0.1085, 0.1079, 0.1104, 0.1118, 0.1145,
                     0.1132, 0.1162, 0.1174, 0.1197, 0.12, 0.1169, 0.119, 0.1169, 0.1159, 0.1192, 0.1185, 0.1213,
                     0.1203,
                     0.1227, 0.1225, 0.1205, 0.1256, 0.1274, 0.122, 0.1235, 0.1223, 0.128, 0.1296, 0.1269, 0.1317,
                     0.1284, 0.1311, 0.1285, 0.132, 0.1349, 0.1355, 0.1326, 0.1348, 0.1351, 0.1368, 0.1361, 0.1365,
                     0.1363]
accuracy_pgirdfl = [0.016, 0.018, 0.0135, 0.0129, 0.0119, 0.0133, 0.014, 0.0124, 0.022, 0.0221, 0.0255, 0.0269, 0.0313,
                    0.0349, 0.0358, 0.0395, 0.0423, 0.047, 0.0493, 0.0481, 0.0512, 0.0576, 0.0535, 0.0592, 0.0601,
                    0.0636, 0.0617, 0.0626, 0.0668, 0.073, 0.0762, 0.0781, 0.0737, 0.0791, 0.079, 0.0866, 0.0904,
                    0.0963,
                    0.0903, 0.0901, 0.0929, 0.0916, 0.0946, 0.0942, 0.1006, 0.0987, 0.1028, 0.1006, 0.1059, 0.1035,
                    0.1083, 0.1053, 0.1121, 0.1142, 0.1117, 0.1155, 0.1145, 0.1144, 0.1124, 0.1154, 0.1176, 0.118,
                    0.1235, 0.1201, 0.1204, 0.1251, 0.1193, 0.1236, 0.1274, 0.1218, 0.13, 0.1285, 0.1294, 0.1358,
                    0.1279,
                    0.126, 0.1349, 0.1351, 0.1375, 0.1319, 0.1352, 0.1316, 0.139, 0.1379, 0.1403, 0.1355, 0.1434,
                    0.1405,
                    0.1452, 0.1478, 0.144, 0.1461, 0.1416, 0.1459, 0.147, 0.1441, 0.1449, 0.1411, 0.148, 0.1439]
accuracy_fixed = [0.0172, 0.0185, 0.0189, 0.0196, 0.018, 0.0168, 0.0152, 0.0122, 0.0135, 0.0128, 0.013, 0.0143, 0.0144,
                  0.015, 0.0159, 0.0156, 0.0177, 0.0187, 0.0198, 0.0208, 0.023, 0.0228, 0.0238, 0.0259, 0.0282, 0.0329,
                  0.0317, 0.034, 0.0356, 0.0367, 0.0389, 0.0431, 0.0447, 0.047, 0.0499, 0.0492, 0.0472, 0.0458, 0.0486,
                  0.0498, 0.0497, 0.0514, 0.0532, 0.0531, 0.0571, 0.0595, 0.0585, 0.0576, 0.0593, 0.0604, 0.0591,
                  0.0597, 0.0614, 0.0658, 0.0648, 0.0675, 0.0695, 0.0665, 0.0712, 0.0741, 0.0741, 0.0751, 0.0771,
                  0.0773, 0.0744, 0.08, 0.0806, 0.0794, 0.0867, 0.0827, 0.086, 0.0885, 0.0865, 0.09, 0.0893, 0.0901,
                  0.0916, 0.0934, 0.0853, 0.0947, 0.0948, 0.093, 0.0972, 0.097, 0.1001, 0.0987, 0.0983, 0.0995, 0.1002,
                  0.1044, 0.1022, 0.1024, 0.1025, 0.1036, 0.1022, 0.1093, 0.1054, 0.1099, 0.1121, 0.1114]

accuracy_random = [0.0169, 0.0186, 0.0188, 0.0158, 0.0142, 0.0142, 0.0151, 0.0146, 0.0171, 0.0196, 0.0205, 0.0212,
                   0.0215, 0.025, 0.0311, 0.0367, 0.0394, 0.04, 0.0436, 0.0474, 0.0492, 0.0509, 0.0531, 0.0524, 0.0586,
                   0.0595, 0.0587, 0.0616, 0.0664, 0.0695, 0.0739, 0.0758, 0.0803, 0.0819, 0.0819, 0.0893, 0.0909,
                   0.0914, 0.0949, 0.0938, 0.0971, 0.0988, 0.0999, 0.1047, 0.1033, 0.1031, 0.1079, 0.1048, 0.1083,
                   0.1114, 0.1089, 0.1127, 0.1163, 0.1158, 0.1152, 0.1163, 0.119, 0.1164, 0.1194, 0.1202, 0.122, 0.1245,
                   0.1233, 0.1252, 0.1244, 0.1266, 0.1247, 0.1281, 0.128, 0.131, 0.1294, 0.1305, 0.1316, 0.1327, 0.1324,
                   0.1328, 0.1355, 0.1361, 0.1398, 0.1372, 0.139, 0.1406, 0.1402, 0.1386, 0.138, 0.1405, 0.1385, 0.1421,
                   0.1452, 0.144, 0.1448, 0.1458, 0.1473, 0.1448, 0.1475, 0.1435, 0.1494, 0.1473, 0.1515, 0.1515]
# accuracy_FL_Client_Sampling =

accuracy_pgirdfl2 = [0.0294, 0.0833, 0.1069, 0.1188, 0.1333, 0.1466, 0.1561, 0.1634, 0.1724, 0.179, 0.1885, 0.1913,
                     0.2003, 0.2032, 0.208, 0.2138, 0.2169, 0.2213, 0.227, 0.227, 0.227, 0.227, 0.227, 0.2277, 0.2277,
                     0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334,
                     0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2334,
                     0.2334, 0.2334, 0.2334, 0.2334, 0.2334, 0.2335, 0.2335, 0.2335, 0.2338, 0.2339, 0.2347, 0.2353,
                     0.2364, 0.2389, 0.2389, 0.2389, 0.2393, 0.2393, 0.2393, 0.2393, 0.2393, 0.2393, 0.2393, 0.2393,
                     0.2393, 0.2393, 0.2393, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24,
                     0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24, 0.24]

accuracy_tiflcsmarp = [0.0177, 0.0182, 0.0491, 0.0572, 0.0689, 0.0829, 0.0942, 0.1025, 0.1082, 0.1162, 0.1194, 0.1259,
                       0.129, 0.1347, 0.1382, 0.1446, 0.1472, 0.153, 0.1537, 0.1564, 0.1583, 0.1622, 0.1654, 0.1641,
                       0.1694, 0.171, 0.1737, 0.1763, 0.1796, 0.1806, 0.1843, 0.1884, 0.1893, 0.1889, 0.1946, 0.1932,
                       0.194, 0.1945, 0.1987, 0.1999, 0.2018, 0.2041, 0.2041, 0.2049, 0.2032, 0.2063, 0.2078, 0.2078,
                       0.2102, 0.2131, 0.2097, 0.2092, 0.2131, 0.2135, 0.2144, 0.2145, 0.2142, 0.2159, 0.214, 0.2162,
                       0.2152, 0.2193, 0.2159, 0.2154, 0.2198, 0.2194, 0.2169, 0.2195, 0.2189, 0.2193, 0.2189, 0.2206,
                       0.2182, 0.2194, 0.2181, 0.2216, 0.2224, 0.2205, 0.2219, 0.2208, 0.2206, 0.2205, 0.2219, 0.2207,
                       0.2225, 0.2205, 0.2233, 0.2208, 0.2194, 0.2172, 0.219, 0.2217, 0.2208, 0.2203, 0.2182, 0.2194,
                       0.2208, 0.222, 0.2187, 0.2233]

accuracy_tiflcsmarp2 = [0.0102, 0.0476, 0.0719, 0.1046, 0.1194, 0.1291, 0.1398, 0.1466, 0.1536, 0.158, 0.1641, 0.1684,
                        0.1722, 0.1768, 0.1807, 0.1875, 0.1923, 0.1988, 0.2017, 0.2051, 0.2099, 0.2142, 0.218, 0.2217,
                        0.2273, 0.2264, 0.2336, 0.2348, 0.2391, 0.2369, 0.2398, 0.2454, 0.2439, 0.2491, 0.2514, 0.2536,
                        0.2565, 0.2556, 0.2543, 0.2563, 0.2607, 0.2598, 0.2659, 0.2631, 0.2628, 0.2697, 0.2684, 0.274,
                        0.2737, 0.2707, 0.2705, 0.2721, 0.2754, 0.2746, 0.274, 0.275, 0.2764, 0.279, 0.2774, 0.2775,
                        0.2784, 0.2756, 0.2813, 0.2755, 0.2801, 0.2772, 0.2792, 0.2776, 0.2779, 0.2792, 0.2783, 0.2765,
                        0.2794, 0.2769, 0.2814, 0.2763, 0.2821, 0.2788, 0.2796, 0.28, 0.2826, 0.2774, 0.2807, 0.2807,
                        0.2782, 0.2795, 0.2781, 0.2791, 0.2765, 0.2766, 0.2761, 0.2778, 0.2771, 0.275, 0.2781, 0.2735,
                        0.2747, 0.2731, 0.2762, 0.2763]

# 绘制数据线
plt.plot(users, accuracy_baseline, 'r--o', markersize=5, linewidth=2, label='Baseline')
plt.plot(users, accuracy_pgirdfl, 'b--s', markersize=5, linewidth=2, label='PGI-RDFL')
plt.plot(users, accuracy_fixed, 'y--D', markersize=5, linewidth=2, label='Fixed')
plt.plot(users, accuracy_random, 'g--^', markersize=5, linewidth=2, label='Random')
# plt.plot(users, accuracy_FL_Client_Sampling, 'm--*', markersize=5, linewidth=2, label='Client-Sampling')
plt.plot(users, accuracy_tiflcsmarp, 'c--*', markersize=5, linewidth=2, label='TiFLCS-MARP')

plt.plot(users, accuracy_pgirdfl2, 'g', markersize=5, linewidth=2, label='PGI-RDFL(without force update)')
plt.plot(users, accuracy_tiflcsmarp2, 'c--', markersize=5, linewidth=2, label='TiFLCS-MARP(evently)')

# 添加图例
plt.legend()

plt.tick_params(axis='x', labelsize=14)
plt.tick_params(axis='y', labelsize=14)

# 设置标题和坐标轴标签
plt.xlabel(r'$Round$')
plt.ylabel(r'$Accuracy$')

# 强制显示完全
plt.tight_layout()

# 显示网格
plt.grid(True)

# 显示图表
plt.show()
