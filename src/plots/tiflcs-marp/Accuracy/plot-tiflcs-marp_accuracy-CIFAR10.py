import matplotlib.pyplot as plt
import numpy as np
import matplotlib

# 设置全局字体为 Times New Roman
matplotlib.rcParams['font.family'] = 'Times New Roman'
matplotlib.rcParams['font.size'] = 16  # 同时设置字体大小

# 定义轮次
users = range(100)

accuracy_baseline = [0.1786, 0.2146, 0.2219, 0.2385, 0.2409, 0.2545, 0.2917, 0.2967, 0.3001, 0.3092, 0.3095, 0.3207,
                     0.3272, 0.3197, 0.328, 0.3388, 0.3513, 0.3445, 0.3531, 0.3563, 0.3583, 0.3515, 0.3701, 0.3708,
                     0.3738, 0.3813, 0.3766, 0.3855, 0.3859, 0.3876, 0.3909, 0.3972, 0.3922, 0.397, 0.401, 0.3981,
                     0.401,
                     0.4017, 0.4024, 0.4052, 0.4127, 0.4118, 0.4162, 0.4159, 0.4157, 0.4176, 0.4243, 0.4171, 0.4245,
                     0.4256, 0.4282, 0.4254, 0.4286, 0.424, 0.4297, 0.4376, 0.43, 0.4336, 0.4315, 0.4338, 0.4366,
                     0.4407,
                     0.4357, 0.4352, 0.4384, 0.443, 0.4467, 0.4422, 0.4338, 0.4387, 0.4491, 0.4475, 0.4515, 0.4472,
                     0.4552, 0.4517, 0.4507, 0.451, 0.4489, 0.4531, 0.4537, 0.4431, 0.4569, 0.4572, 0.4606, 0.4564,
                     0.4599, 0.4624, 0.4602, 0.4603, 0.4664, 0.4623, 0.4583, 0.4653, 0.4585, 0.4693, 0.4629, 0.4683,
                     0.461, 0.4627]
accuracy_pgirdfl = [0.1436, 0.1755, 0.2638, 0.2829, 0.2833, 0.332, 0.332, 0.3331, 0.3562, 0.3579, 0.3602, 0.4008,
                    0.4008, 0.4091, 0.4136, 0.4162, 0.4162, 0.4162, 0.4214, 0.4346, 0.4346, 0.4462, 0.4462, 0.4462,
                    0.4477, 0.4567, 0.4624, 0.4624, 0.4624, 0.4624, 0.4701, 0.4783, 0.4861, 0.4861, 0.4876, 0.4973,
                    0.4973, 0.4973, 0.498, 0.5028, 0.5028, 0.5028, 0.5049, 0.508, 0.5088, 0.5157, 0.5157, 0.5157,
                    0.5157, 0.5157, 0.5203, 0.5208, 0.5208, 0.5208, 0.5232, 0.5241, 0.5241, 0.5241, 0.5269, 0.5269,
                    0.5269, 0.5269, 0.5269, 0.5269, 0.5269, 0.5269, 0.5269, 0.5269, 0.5269, 0.5269, 0.5269, 0.5269,
                    0.53, 0.53, 0.53, 0.53, 0.53, 0.5305, 0.5313, 0.5318, 0.5318, 0.5318, 0.5326, 0.5326, 0.5326,
                    0.5405, 0.5405, 0.5405, 0.5417, 0.5417, 0.5436, 0.5439, 0.5448, 0.5448, 0.5481, 0.5481, 0.5481,
                    0.5481, 0.5514, 0.5514]
accuracy_fixed = [0.1229, 0.1585, 0.1764, 0.1975, 0.2153, 0.2272, 0.2289, 0.2416, 0.2487, 0.2672, 0.2725, 0.2773,
                  0.2863, 0.2879, 0.2936, 0.2907, 0.2935, 0.3095, 0.3096, 0.3132, 0.3157, 0.3222, 0.3224, 0.3288,
                  0.3222, 0.3345, 0.3338, 0.335, 0.335, 0.3341, 0.3422, 0.342, 0.3452, 0.3475, 0.345, 0.3488, 0.355,
                  0.3544, 0.3574, 0.3563, 0.3577, 0.3672, 0.3689, 0.3647, 0.3735, 0.3688, 0.372, 0.3763, 0.3737, 0.3793,
                  0.3772, 0.3822, 0.3781, 0.3838, 0.3871, 0.3872, 0.3904, 0.3866, 0.383, 0.3883, 0.3888, 0.3855, 0.3917,
                  0.3936, 0.3949, 0.4005, 0.4031, 0.4058, 0.4056, 0.4011, 0.405, 0.4011, 0.4064, 0.4041, 0.4088, 0.4027,
                  0.4108, 0.4081, 0.406, 0.4122, 0.4126, 0.4059, 0.4138, 0.4138, 0.4196, 0.4123, 0.4168, 0.4132, 0.4155,
                  0.4175, 0.4246, 0.4234, 0.4238, 0.4257, 0.4218, 0.4229, 0.4141, 0.426, 0.4254, 0.4262]

accuracy_random = [0.1037, 0.1183, 0.1574, 0.1961, 0.2293, 0.2525, 0.2654, 0.2781, 0.3005, 0.3039, 0.3134, 0.3236,
                   0.327, 0.3266, 0.336, 0.3419, 0.3436, 0.3518, 0.3576, 0.3628, 0.3646, 0.3634, 0.3748, 0.3709, 0.3763,
                   0.3835, 0.3846, 0.3876, 0.3922, 0.3904, 0.3968, 0.3986, 0.3969, 0.4043, 0.4016, 0.4074, 0.4093,
                   0.4091, 0.4207, 0.4175, 0.4223, 0.4179, 0.423, 0.43, 0.4228, 0.4263, 0.4254, 0.4255, 0.431, 0.4259,
                   0.4323, 0.4298, 0.4351, 0.4352, 0.4343, 0.4418, 0.4346, 0.443, 0.4409, 0.4367, 0.4396, 0.4431,
                   0.4457, 0.4479, 0.4451, 0.4449, 0.4466, 0.4464, 0.4485, 0.4495, 0.4534, 0.4557, 0.449, 0.4574,
                   0.4576, 0.4572, 0.4539, 0.4544, 0.4583, 0.4566, 0.4608, 0.4654, 0.461, 0.4656, 0.4679, 0.4645,
                   0.4599, 0.468, 0.4681, 0.4681, 0.4674, 0.4724, 0.471, 0.4767, 0.4663, 0.4735, 0.4769, 0.4768, 0.4797,
                   0.4729]
# accuracy_FL_Client_Sampling =

accuracy_pgirdfl2 = [0.1448, 0.2353, 0.3233, 0.3567, 0.3858, 0.4036, 0.4274, 0.4421, 0.4446, 0.4539, 0.4539, 0.4539,
                     0.4561, 0.4575, 0.4575, 0.4623, 0.4623, 0.4623, 0.4663, 0.4681, 0.4715, 0.4715, 0.4715, 0.4721,
                     0.4721, 0.4737, 0.4737, 0.4737, 0.4737, 0.4766, 0.4797, 0.4846, 0.4846, 0.4846, 0.4846, 0.4846,
                     0.4846, 0.4846, 0.4846, 0.4846, 0.4908, 0.4908, 0.4961, 0.4961, 0.4961, 0.4961, 0.4961, 0.4985,
                     0.5061, 0.5061, 0.5061, 0.5061, 0.5061, 0.5087, 0.5087, 0.5087, 0.5087, 0.5087, 0.5087, 0.5087,
                     0.5087, 0.5087, 0.5087, 0.5087, 0.5087, 0.5087, 0.5087, 0.5087, 0.5087, 0.5087, 0.5087, 0.5087,
                     0.5087, 0.5092, 0.5092, 0.5092, 0.5092, 0.5108, 0.5108, 0.5108, 0.5108, 0.5108, 0.5108, 0.5108,
                     0.5108, 0.5138, 0.5138, 0.5142, 0.5142, 0.5153, 0.5179, 0.5211, 0.5232, 0.5288, 0.5288, 0.5288,
                     0.5297, 0.5297, 0.532, 0.5379]

accuracy_tiflcsmarp = [0.2982, 0.3948, 0.429, 0.4481, 0.4643, 0.474, 0.4804, 0.4936, 0.4972, 0.503, 0.5153, 0.5202,
                       0.5264, 0.5287, 0.5358, 0.5392, 0.5417, 0.5486, 0.5552, 0.5526, 0.559, 0.5628, 0.565, 0.567,
                       0.5746, 0.5736, 0.5786, 0.5736, 0.5849, 0.5859, 0.5884, 0.5909, 0.5901, 0.5978, 0.5986, 0.6039,
                       0.6053, 0.608, 0.6075, 0.6119, 0.6125, 0.6186, 0.6195, 0.6195, 0.6219, 0.6246, 0.6243, 0.6264,
                       0.6311, 0.6318, 0.6321, 0.6307, 0.635, 0.6372, 0.637, 0.6389, 0.6416, 0.6394, 0.6429, 0.6478,
                       0.6446, 0.646, 0.6477, 0.649, 0.6514, 0.6477, 0.6512, 0.65, 0.6532, 0.657, 0.6578, 0.6549,
                       0.6531, 0.656, 0.6578, 0.6568, 0.6559, 0.6598, 0.6598, 0.6618, 0.6623, 0.6614, 0.659, 0.6581,
                       0.6649, 0.6635, 0.6579, 0.664, 0.6638, 0.6588, 0.6668, 0.6615, 0.6662, 0.6639, 0.6665, 0.6642,
                       0.6649, 0.6668, 0.6635, 0.6678]

accuracy_tiflcsmarp2 = [0.3152, 0.3592, 0.392, 0.4162, 0.4274, 0.4408, 0.4503, 0.4573, 0.4661, 0.4719, 0.4793, 0.4864,
                        0.4864, 0.4931, 0.4987, 0.5045, 0.5097, 0.5108, 0.5207, 0.5182, 0.5237, 0.528, 0.5341, 0.5359,
                        0.5402, 0.5432, 0.5413, 0.546, 0.5494, 0.5532, 0.5556, 0.5549, 0.5568, 0.5643, 0.5681, 0.5671,
                        0.5704, 0.5684, 0.5703, 0.5783, 0.5798, 0.5782, 0.5769, 0.5833, 0.5859, 0.5874, 0.5896, 0.5857,
                        0.5898, 0.5927, 0.5967, 0.5908, 0.5916, 0.6015, 0.5993, 0.6004, 0.5992, 0.6042, 0.6056, 0.6096,
                        0.6053, 0.6105, 0.6104, 0.6123, 0.6123, 0.612, 0.6125, 0.6131, 0.6193, 0.6183, 0.6178, 0.619,
                        0.6192, 0.6197, 0.6202, 0.6218, 0.6203, 0.6219, 0.6263, 0.6246, 0.6281, 0.6248, 0.625, 0.6226,
                        0.6274, 0.624, 0.6265, 0.6284, 0.6292, 0.6273, 0.6284, 0.6332, 0.6299, 0.6315, 0.6297, 0.6318,
                        0.6281, 0.6332, 0.6339, 0.6324]

# 绘制数据线
plt.plot(users, accuracy_baseline, 'r--o', markersize=5, linewidth=2, label='Baseline')
plt.plot(users, accuracy_pgirdfl, 'b--s', markersize=5, linewidth=2, label='PGI-RDFL')
plt.plot(users, accuracy_fixed, 'y--D', markersize=5, linewidth=2, label='Fixed')
plt.plot(users, accuracy_random, 'g--^', markersize=5, linewidth=2, label='Random')
# plt.plot(users, accuracy_FL_Client_Sampling, 'm--*', markersize=5, linewidth=2, label='Client-Sampling')
plt.plot(users, accuracy_tiflcsmarp, 'c--*', markersize=5, linewidth=2, label='TiFLCS-MARP')

plt.plot(users, accuracy_pgirdfl2, 'g', markersize=5, linewidth=2, label='PGI-RDFL(without force update)')
plt.plot(users, accuracy_tiflcsmarp2, 'c--', markersize=5, linewidth=2, label='TiFLCS-MARP(evently)')

# 添加图例
plt.legend()

plt.tick_params(axis='x', labelsize=14)
plt.tick_params(axis='y', labelsize=14)

# 设置标题和坐标轴标签
plt.xlabel(r'$Round$')
plt.ylabel(r'$Accuracy$')

# 强制显示完全
plt.tight_layout()

# 显示网格
plt.grid(True)

# 显示图表
plt.show()
